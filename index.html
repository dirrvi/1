<!DOCTYPE html>
<html lang="uk">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Тестування</title>
  <style>
    body { font-family: Arial, sans-serif; margin: 0; padding: 0; background: #f4f4f4; }
    .hidden { display: none; }
    .page { padding: 20px; }
    button { margin-top: 10px; padding: 10px 20px; font-size: 16px; cursor: pointer; }
    .tabs { display: flex; margin-bottom: 10px; }
    .tab { margin-right: 10px; padding: 10px; background: #ddd; cursor: pointer; }
    .tab.active { background: #bbb; }
    .tab-content { background: white; padding: 10px; border: 1px solid #ccc; }
    .question { margin-bottom: 15px; }
    table.results-table { width: 100%; border-collapse: collapse; margin-top: 20px; }
    table.results-table th, table.results-table td { border: 1px solid #ccc; padding: 8px; text-align: center; background: white; }
    .col3-green { background-color: #c9f7c2 !important; }
  </style>
</head>
<body>

<!-- (HTML remains unchanged) -->

<script>
const pages = [
  "page-rules", "page-block1code", "page-block1start", "page-block1test", "confirm-finish-block1", "page-block1result",
  "page-block2code", "page-block2start", "page-block2test", "confirm-finish-block2", "page-block2result", "page-answers"
];
function showPage(id) {
  pages.forEach(p => document.getElementById(p).classList.add('hidden'));
  document.getElementById(id).classList.remove('hidden');
}
function renderQuestions(subject, containerId) {
  const container = document.getElementById(containerId);
  for (let i = 1; i <= 12; i++) {
    const q = document.createElement('div');
    q.className = 'question';
    q.innerHTML = `<b>${i}. Питання ${i} (${subject})</b><br>
      <label><input type="radio" name="${subject}-q${i}" value="a"> A</label>
      <label><input type="radio" name="${subject}-q${i}" value="b"> B</label>
      <label><input type="radio" name="${subject}-q${i}" value="c"> C</label>`;
    container.appendChild(q);
  }
}
function countAnswers(subject) {
  let count = 0;
  for (let i = 1; i <= 12; i++) {
    if (document.querySelector(`input[name='${subject}-q${i}']:checked`)) count++;
  }
  return count;
}
function getMockMark(answers) {
  return Math.floor((answers / 12) * 12);
}
document.getElementById("btn-accept-rules").onclick = () => showPage("page-block1code");
document.getElementById("btn-start-block1").onclick = () => {
  const code = document.getElementById("input-block1code").value;
  if (code === "54") showPage("page-block1start");
  else document.getElementById("error-block1code").textContent = "Невірний код";
};
document.getElementById("btn-go-test1").onclick = () => showPage("page-block1test");
renderQuestions("ukr", "tab-ukr");
renderQuestions("math", "tab-math");
document.querySelectorAll(".tab").forEach(tab => {
  tab.addEventListener("click", () => {
    document.querySelectorAll(".tab").forEach(t => t.classList.remove("active"));
    document.querySelectorAll(".tab-content").forEach(c => c.classList.add("hidden"));
    tab.classList.add("active");
    document.getElementById("tab-" + tab.dataset.subject).classList.remove("hidden");
  });
});
document.getElementById("btn-finish-block1").onclick = () => showPage("confirm-finish-block1");
document.getElementById("btn-cancel-finish-block1").onclick = () => showPage("page-block1test");
document.getElementById("btn-confirm-finish-block1").onclick = () => {
  const ukr = countAnswers("ukr");
  const math = countAnswers("math");
  document.getElementById("page-block1result").innerHTML = `
    <h2>Результати після першого блоку</h2>
    <table class="results-table">
      <tr><th>Предмет</th><th>Кількість відповідей</th><th>Оцінка</th></tr>
      <tr><td>Українська мова</td><td>${ukr}</td><td></td></tr>
      <tr><td>Математика</td><td>${math}</td><td></td></tr>
      <tr><td>Історія України</td><td>0</td><td>До виконання не приступив</td></tr>
      <tr><td>Англійська мова</td><td>0</td><td>До виконання не приступив</td></tr>
    </table>
    <button id="btn-next-block">Перейти на другий блок</button>`;
  showPage("page-block1result");
  document.getElementById("btn-next-block").onclick = () => showPage("page-block2code");
};
document.getElementById("btn-start-block2").onclick = () => {
  const code = document.getElementById("input-block2code").value;
  if (code === "29") showPage("page-block2start");
  else document.getElementById("error-block2code").textContent = "Невірний код";
};
document.getElementById("btn-go-test2").onclick = () => showPage("page-block2test");
renderQuestions("history", "tab-history");
renderQuestions("eng", "tab-eng");
document.getElementById("btn-finish-block2").onclick = () => showPage("confirm-finish-block2");
document.getElementById("btn-cancel-finish-block2").onclick = () => showPage("page-block2test");
document.getElementById("btn-confirm-finish-block2").onclick = () => {
  const results = {
    ukr: countAnswers("ukr"),
    math: countAnswers("math"),
    history: countAnswers("history"),
    eng: countAnswers("eng")
  };
  const marks = {
    ukr: getMockMark(results.ukr),
    math: getMockMark(results.math),
    history: getMockMark(results.history),
    eng: getMockMark(results.eng)
  };
  document.getElementById("page-block2result").innerHTML = `
    <h2>Підсумкові результати</h2>
    <table class="results-table">
      <tr><th>Предмет</th><th>Кількість відповідей</th><th>Оцінка</th></tr>
      <tr><td>Українська мова</td><td>${results.ukr}</td><td class="col3-green">${marks.ukr}</td></tr>
      <tr><td>Математика</td><td>${results.math}</td><td class="col3-green">${marks.math}</td></tr>
      <tr><td>Історія України</td><td>${results.history}</td><td class="col3-green">${marks.history}</td></tr>
      <tr><td>Англійська мова</td><td>${results.eng}</td><td class="col3-green">${marks.eng}</td></tr>
    </table>
    <button id="btn-view-answers">Переглянути відповіді</button>`;
  showPage("page-block2result");
  document.getElementById("btn-view-answers").onclick = () => {
    const subjects = ["ukr", "math", "history", "eng"];
    let html = "";
    subjects.forEach(sub => {
      html += `<h3>${sub.toUpperCase()}</h3>`;
      for (let i = 1; i <= 12; i++) {
        const ans = document.querySelector(`input[name='${sub}-q${i}']:checked`);
        html += `<p><b>${i}.</b> ${ans ? 'Ваша відповідь: ' + ans.value : 'Не відповів'}</p>`;
      }
    });
    document.getElementById("answers-container").innerHTML = html;
    showPage("page-answers");
  }
};
document.getElementById("btn-restart").onclick = () => location.reload();
</script>
</body>
</html>
